{"version":3,"sources":["../main.js"],"names":["get","document","getElementById","id","c","gc","$","body","p1","Player","count","CountRegister","shop","Shop","enemies","bullets","booms","stars","items","mouse","x","y","w","h","down","ctx","img","dc","dj","pistol","uzi","rocketLauncher","bowler","violin","sax","enemy","greenAlien","skullAlien","toothAlien","eyeballAlien","tongueAlien","boss","bossSpawn","meteorite","bacteriophage","finalBoss","firstAid","uziAmmo","rocketAmmo","beer","barrier","aud","Sound","hammertime","Hammer","isMobile","checkIfMobile","paused","personalBest","init","checkCookie","createLevelLengthsArray","width","getContext","canvas","height","imageSmoothingEnabled","font","i","Star","Math","random","stock","push","ShopItem","window","innerWidth","innerHeight","alert","render","cursor","fillStyle","fillRect","textAlign","fillText","currentLevel","menu","gameScript","requestAnimationFrame","dcBlock","selected","djBlock","collision","drawImage","isCross","objects","length","j","show","update","expended","splice","go","display","globalAlpha","score","lifebarWidth","hp","maxHp","arsenal","pistolCoords","uziCoords","rocketCoords","equip","toString","bulletHit","bullet","isRocket","bigBoom","shrapnel","rocketDamage","magnitude","time","rndX","floor","rndY","setTimeout","Boom","drop","nothing","rocket","rollDice","enemyDrop","Item","choices","args","Array","prototype","slice","call","arguments","totalProportions","reduce","a","b","rnd","totalNumber","pressOptions","event","threshold","set","on","ev","srcEvent","pageX","offset","left","pageY","top","addEventListener","shoot","e","handleMouse","touches","keyCode"],"mappings":"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","file":"main.js","sourcesContent":["const get = id => document.getElementById(id);\nconst c = get(\"gameCanvas\");\nconst gc = $('#gameCanvas');\nconst body = $('body');\nlet p1 = new Player();\nlet count = new CountRegister();\nlet shop = new Shop();\nlet enemies = [];\nlet bullets = [];\nlet booms = [];\nlet stars = [];\nlet items = [];\nlet mouse = {\n    x: 0,\n    y: 0,\n    w: 1,\n    h: 1,\n    down: false\n};\nlet ctx;\nlet img = {\n    dc: get(\"cross\"),\n    dj: get(\"jackson\"),\n    pistol: get(\"pistol\"),\n    uzi: get(\"uzi\"),\n    rocketLauncher: get(\"rocketLauncher\"),\n    bowler: get(\"bowler\"),\n    violin: get(\"violin\"),\n    sax: get(\"sax\"),\n    enemy: get(\"enemy\"),\n    greenAlien: get(\"greenAlien\"),\n    skullAlien: get(\"skullAlien\"),\n    toothAlien: get(\"toothAlien\"),\n    eyeballAlien: get(\"eyeballAlien\"),\n    tongueAlien: get(\"tongueAlien\"),\n    boss: get(\"boss\"),\n    bossSpawn: get(\"bossSpawn\"),\n    meteorite: get(\"meteorite\"),\n    bacteriophage: get(\"bacteriophage\"),\n    finalBoss: get(\"finalBoss\"),\n    firstAid: get(\"firstAid\"),\n    uziAmmo: get(\"uziAmmo\"),\n    rocketAmmo: get(\"rocketAmmo\"),\n    beer: get(\"beer\"),\n    barrier: get(\"barrier\"),\n    shop: get(\"shop\")\n};\nlet aud = new Sound(\"audioSpriteTest.mp3\");\nlet hammertime = new Hammer(c);\nlet isMobile = checkIfMobile();\nlet paused = false;\nlet personalBest = 0;\n\nfunction init() {\n    checkCookie(\"dcdjScore\");\n    count.createLevelLengthsArray();\n    shop.x = width / 2;\n    ctx = c.getContext(\"2d\");\n    ctx.canvas.width = width;\n    ctx.canvas.height = height;\n    ctx.imageSmoothingEnabled = false;\n    ctx.font = font(20);\n    for (let i = 0; i < 20; i++) {\n        stars[i] = new Star(Math.random() * width, Math.random() * height, Math.random() * 5 + 1);\n    }\n    // enemies[0] = new Enemy(width / 2, 0);\n    shop.stock.push(new ShopItem(\"beer\"));\n    shop.stock.push(new ShopItem(\"firstAid\"));\n    shop.stock.push(new ShopItem(\"uziAmmo\"));\n    shop.stock.push(new ShopItem(\"rocket\"));\n    shop.stock.push(new ShopItem(\"barrier\"));\n    if (isMobile && window.innerWidth > window.innerHeight) {\n        alert(\"If you are using mobile please switch to portrait view and reload this page.\");\n    }\n}\n\nfunction render() {\n    cursor(\"default\"); // gets overriden, placed to avoid carry-over glitches\n    ctx.fillStyle = \"#000000\";\n    ctx.fillRect(0,0,width,height);\n    if (paused) {\n        ctx.textAlign = \"center\";\n        ctx.fillStyle = \"#FFF\";\n        ctx.fillText(\"Paused\", width / 2, height / 2);\n    } else {\n        count.currentLevel === 0 ? menu() : gameScript();\n    }\n    requestAnimationFrame(render);\n}\n\nfunction menu() {\n    let dcBlock = {\n        x: width * 0.5,\n        y: height * 0.45,\n        w: width * 0.4,\n        h: height * 0.238,\n        selected: false\n    };\n    let djBlock = {\n        x: width * 0.5,\n        y: height * 0.75,\n        w: width * 0.4,\n        h: height * 0.238,\n        selected: false\n    };\n    dcBlock.selected = collision(mouse, dcBlock);\n    djBlock.selected = collision(mouse, djBlock);\n    dcBlock.selected || djBlock.selected ? cursor(\"pointer\") : cursor(\"default\");\n    ctx.fillStyle = dcBlock.selected ? \"#58ff3e\" : \"#818084\";\n    ctx.fillRect(dcBlock.x - dcBlock.w / 2, dcBlock.y - dcBlock.h / 2, dcBlock.w, dcBlock.h);\n    ctx.fillStyle = djBlock.selected ? \"#58ff3e\" : \"#818084\";\n    ctx.fillRect(djBlock.x - djBlock.w / 2, djBlock.y  - djBlock.h / 2, djBlock.w, djBlock.h);\n    ctx.fillStyle = \"#ffe827\";\n    ctx.font = font(30);\n    ctx.textAlign = \"center\";\n    ctx.fillText(\"CHOOSE YOUR DAVID\", width * 0.5, height * 0.2);\n    if (personalBest > 0) {\n        ctx.font = font(20);\n        ctx.fillText(\"Personal Best: \" + personalBest, width * 0.5, height * 0.3);\n        ctx.font = font(30);\n    }\n    ctx.fillStyle = dcBlock.selected ? \"#FFFFFF\" : \"#b29739\";\n    ctx.fillText(\"CROSS\", width * 0.5, height * 0.38);\n    ctx.fillStyle = djBlock.selected ? \"#FFFFFF\" : \"#b29739\";\n    ctx.fillText(\"JACKSON\", width * 0.5, height * 0.68);\n    ctx.drawImage(img.dc, width / 2 - p1.w, height * 0.4, p1.w * 2, p1.h * 2);\n    ctx.drawImage(img.dj, width / 2 - p1.w, height * 0.7, p1.w * 2, p1.h * 2);\n    if ((dcBlock.selected || djBlock.selected) && mouse.down) count.currentLevel = 1;\n    p1.isCross = dcBlock.selected;\n}\n\nfunction gameScript() {\n    let objects = [stars, bullets, booms, items, enemies, [shop, p1]];\n    for (let i = 0; i < objects.length; i++) {\n        for (let j = objects[i].length - 1; j >= 0; j--) {\n            objects[i][j].show();\n            objects[i][j].update();\n            if (\"expended\" in objects[i][j] && objects[i][j].expended) {\n                objects[i].splice(j, 1);\n            }\n        }\n    }\n    count.go();\n    display();\n}\n\nfunction display() {\n    ctx.globalAlpha = 0.5;\n    ctx.fillStyle = \"#FFFFFF\";\n    ctx.fillRect(0, height * 0.915, width, height * 0.085);\n    ctx.globalAlpha = 1;\n    ctx.fillStyle = \"#000000\";\n    ctx.font = font(18);\n    ctx.textAlign=\"left\";\n    ctx.fillText(\"Davcoin: \" + p1.score, 30, height * 0.95);\n    ctx.fillText(\"HP\", 30, height * 0.98);\n    ctx.fillStyle = \"#000000\";\n    let lifebarWidth = width / 3;\n    ctx.fillRect(60, height * 0.96, lifebarWidth, height * 0.02);\n    if (p1.hp > 0) {\n        ctx.fillStyle = \"#FF0000\";\n        ctx.fillRect(60, height * 0.96, (p1.hp / p1.maxHp) * lifebarWidth, height * 0.02);\n    }\n    arsenal();\n}\n\nfunction arsenal() {\n    let pistolCoords = {\n        x: width * 0.59,\n        y: height * 0.96,\n        w: width * 0.12,\n        h: height * 0.065\n    };\n    let uziCoords = {\n        x: width * 0.72,\n        y: height * 0.96,\n        w: width * 0.12,\n        h: height * 0.065\n    };\n    let rocketCoords = {\n        x: width * 0.88,\n        y: height * 0.96,\n        w: width * 0.17,\n        h: height * 0.065\n    };\n    p1.equip === 0 ? ctx.fillStyle = \"#FFFF00\" : ctx.fillStyle = \"#999999\";\n    ctx.fillRect(pistolCoords.x - pistolCoords.w / 2, pistolCoords.y - pistolCoords.h / 2, pistolCoords.w, pistolCoords.h);\n    p1.equip === 1 ? ctx.fillStyle = \"#FFFF00\" : ctx.fillStyle = \"#999999\";\n    ctx.fillRect(uziCoords.x - uziCoords.w / 2, uziCoords.y - uziCoords.h / 2, uziCoords.w, uziCoords.h);\n    p1.equip === 2 ? ctx.fillStyle = \"#FFFF00\" : ctx.fillStyle = \"#999999\";\n    ctx.fillRect(rocketCoords.x - rocketCoords.w / 2, rocketCoords.y - rocketCoords.h / 2, rocketCoords.w, rocketCoords.h);\n    ctx.drawImage(img.pistol, pistolCoords.x - pistolCoords.w / 2, pistolCoords.y - pistolCoords.h / 2, pistolCoords.w * 0.9, pistolCoords.h * 0.9);\n    ctx.drawImage(img.uzi, uziCoords.x - uziCoords.w / 2, uziCoords.y - uziCoords.h / 2, uziCoords.w * 0.9, uziCoords.h * 0.9);\n    ctx.drawImage(img.rocketLauncher, rocketCoords.x - rocketCoords.w / 2, rocketCoords.y - rocketCoords.h / 2, rocketCoords.w * 0.9, rocketCoords.h * 0.9);\n    if (collision(pistolCoords, mouse) && mouse.down) {\n        p1.equip = 0;\n    }\n    if (collision(uziCoords, mouse) && mouse.down) {\n        p1.equip = 1;\n    }\n    if (collision(rocketCoords, mouse) && mouse.down) {\n        p1.equip = 2;\n    }\n    ctx.fillStyle = \"#4444FF\";\n    ctx.fillText(p1.uziAmmo.toString(), uziCoords.x - uziCoords.w / 2, uziCoords.y - uziCoords.h / 3);\n    ctx.fillText(p1.rocketAmmo.toString(), rocketCoords.x, rocketCoords.y - rocketCoords.h / 3);\n}\n\nfunction bulletHit(bullet) {\n    if (bullet.isRocket) {\n        bigBoom(bullet.x, bullet.y, 7, 500);\n        shrapnel(bullet.x, bullet.y);\n        return p1.rocketDamage;\n    } else if (\"isShrapnel\" in bullet) {\n        return 5;\n    } else {\n        return 1;\n    }\n}\n\nfunction bigBoom(x, y, magnitude, time) {\n    for (let j = 0; j < magnitude; j++) {\n        let rndX = Math.floor(Math.random() * (width * 0.5)) - width * 0.25;\n        let rndY = Math.floor(Math.random() * (width * 0.5)) - width * 0.25;\n        setTimeout(() => {\n            booms.push(new Boom(x + rndX, y + rndY));\n        }, Math.floor(Math.random() * time));\n    }\n}\n\nfunction drop(x, y, nothing, bowler, sax, violin, firstAid, beer, uziAmmo, rocket, barrier) {\n    let rollDice = enemyDrop(nothing, bowler, sax, violin, firstAid, beer, uziAmmo, rocket, barrier);\n    if (rollDice !== \"nothing\") items.push(new Item(rollDice, x, y));\n}\n\nfunction enemyDrop(nothing, bowler, sax, violin, firstAid, beer, uziAmmo, rocket, barrier) {\n    let choices = [\"nothing\", \"bowler\", \"sax\", \"violin\", \"firstAid\", \"beer\", \"uziAmmo\", \"rocketAmmo\", \"barrier\"];\n    let args = Array.prototype.slice.call(arguments);\n    let totalProportions = args.reduce((a, b) => a + b);\n    let rnd = Math.floor(Math.random() * totalProportions);\n    let totalNumber = 0;\n    for (let i = 0; i < args.length; i++) {\n        if (rnd < args[i] + totalNumber) {\n            return choices[i];\n        } else {\n            totalNumber += args[i];\n        }\n    }\n}\n\nlet pressOptions = {\n    event: 'press',\n    // pointer: 1,\n    threshold: 1,\n    time: 1\n};\n\nhammertime.get('press').set(pressOptions);\n\nhammertime.on('pan', function(ev) {\n    mouse.x = ev.srcEvent.pageX - gc.offset().left;\n    mouse.y = ev.srcEvent.pageY - gc.offset().top;\n    if (p1.x < 0) p1.x = 0;\n    if (p1.x > width) p1.x = width;\n});\n\ndocument.body.addEventListener(\"click\", () => {\n    p1.shoot();\n}, false);\n\ndocument.body.addEventListener(\"mousemove\", (e) => {\n    handleMouse(e);\n}, false);\n\ndocument.body.addEventListener(\"mousedown\", () => {\n    mouse.down = true;\n}, false);\n\ndocument.body.addEventListener(\"mouseup\", () => {\n    mouse.down = false;\n}, false);\n\ndocument.body.addEventListener(\"touchstart\", (e) => {\n    mouse.x = e.touches[0].pageX;\n    mouse.y = e.touches[0].pageY;\n    p1.shoot();\n    mouse.down = true;\n}, false);\n\ndocument.body.addEventListener(\"touchend\", () => {\n    mouse.down = false;\n}, false);\n\nif (!isMobile) {\n    document.addEventListener('keypress', (event) => {\n        if (event.keyCode === 112) {\n            paused = !paused;\n        }\n    });\n}\n\ninit();\nrender();\n"]}