{"version":3,"sources":["../main.js"],"names":["get","document","getElementById","id","c","gc","$","body","p1","Player","count","CountRegister","shop","Shop","enemies","bullets","booms","stars","items","mouse","x","y","w","h","down","ctx","img","dc","dj","pistol","uzi","rocketLauncher","bowler","violin","sax","enemy","greenAlien","skullAlien","toothAlien","eyeballAlien","tongueAlien","boss","bossSpawn","meteorite","bacteriophage","finalBoss","firstAid","uziAmmo","rocketAmmo","beer","barrier","aud","Sound","hammertime","Hammer","isMobile","checkIfMobile","paused","personalBest","testCoords","init","checkCookie","createLevelLengthsArray","width","getContext","canvas","height","imageSmoothingEnabled","font","i","Star","Math","random","stock","push","ShopItem","window","innerWidth","innerHeight","alert","render","cursor","fillStyle","fillRect","textAlign","fillText","currentLevel","menu","gameScript","console","log","requestAnimationFrame","dcBlock","selected","djBlock","collision","drawImage","isCross","objects","length","j","show","update","expended","splice","go","display","globalAlpha","score","lifebarWidth","hp","maxHp","arsenal","pistolCoords","uziCoords","rocketCoords","equip","toString","bulletHit","bullet","isRocket","bigBoom","shrapnel","rocketDamage","magnitude","time","rndX","floor","rndY","setTimeout","Boom","drop","nothing","rocket","rollDice","enemyDrop","Item","choices","args","Array","prototype","slice","call","arguments","totalProportions","reduce","a","b","rnd","totalNumber","pressOptions","event","threshold","set","on","ev","srcEvent","pageX","offset","left","pageY","top","addEventListener","shoot","e","handleMouse","touches","keyCode"],"mappings":"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","file":"main.js","sourcesContent":["const get = id => document.getElementById(id);\nconst c = get(\"gameCanvas\");\nconst gc = $('#gameCanvas');\nconst body = $('body');\nlet p1 = new Player();\nlet count = new CountRegister();\nlet shop = new Shop();\nlet enemies = [];\nlet bullets = [];\nlet booms = [];\nlet stars = [];\nlet items = [];\nlet mouse = {\n    x: 0,\n    y: 0,\n    w: 1,\n    h: 1,\n    down: false\n};\nlet ctx;\nlet img = {\n    dc: get(\"cross\"),\n    dj: get(\"jackson\"),\n    pistol: get(\"pistol\"),\n    uzi: get(\"uzi\"),\n    rocketLauncher: get(\"rocketLauncher\"),\n    bowler: get(\"bowler\"),\n    violin: get(\"violin\"),\n    sax: get(\"sax\"),\n    enemy: get(\"enemy\"),\n    greenAlien: get(\"greenAlien\"),\n    skullAlien: get(\"skullAlien\"),\n    toothAlien: get(\"toothAlien\"),\n    eyeballAlien: get(\"eyeballAlien\"),\n    tongueAlien: get(\"tongueAlien\"),\n    boss: get(\"boss\"),\n    bossSpawn: get(\"bossSpawn\"),\n    meteorite: get(\"meteorite\"),\n    bacteriophage: get(\"bacteriophage\"),\n    finalBoss: get(\"finalBoss\"),\n    firstAid: get(\"firstAid\"),\n    uziAmmo: get(\"uziAmmo\"),\n    rocketAmmo: get(\"rocketAmmo\"),\n    beer: get(\"beer\"),\n    barrier: get(\"barrier\"),\n    shop: get(\"shop\")\n};\nlet aud = new Sound(\"audioSpriteTest.mp3\");\nlet hammertime = new Hammer(c);\nlet isMobile = checkIfMobile();\nlet paused = false;\nlet personalBest = 0;\nlet testCoords = [0, 0];\n\nfunction init() {\n    checkCookie(\"dcdjScore\");\n    count.createLevelLengthsArray();\n    shop.x = width / 2;\n    ctx = c.getContext(\"2d\");\n    ctx.canvas.width = width;\n    ctx.canvas.height = height;\n    ctx.imageSmoothingEnabled = false;\n    ctx.font = font(20);\n    for (let i = 0; i < 20; i++) {\n        stars[i] = new Star(Math.random() * width, Math.random() * height, Math.random() * 5 + 1);\n    }\n    // enemies[0] = new Enemy(width / 2, 0);\n    shop.stock.push(new ShopItem(\"beer\"));\n    shop.stock.push(new ShopItem(\"firstAid\"));\n    shop.stock.push(new ShopItem(\"uziAmmo\"));\n    shop.stock.push(new ShopItem(\"rocket\"));\n    shop.stock.push(new ShopItem(\"barrier\"));\n    if (isMobile && window.innerWidth > window.innerHeight) {\n        alert(\"If you are using mobile please switch to portrait view and reload this page.\");\n    }\n}\n\nfunction render() {\n    cursor(\"default\"); // gets overriden, placed to avoid carry-over glitches\n    ctx.fillStyle = \"#000000\";\n    ctx.fillRect(0,0,width,height);\n    if (paused) {\n        ctx.textAlign = \"center\";\n        ctx.fillStyle = \"#FFF\";\n        ctx.fillText(\"Paused\", width / 2, height / 2);\n    } else {\n        count.currentLevel === 0 ? menu() : gameScript();\n    }\n    ctx.fillText(\"CURRENTLY BEING EDITED\", width / 5, height * 0.1);\n    ctx.fillText(testCoords, width / 2, height * 0.9);\n    console.log(testCoords);\n    requestAnimationFrame(render);\n}\n\nfunction menu() {\n    let dcBlock = {\n        x: width * 0.5,\n        y: height * 0.45,\n        w: width * 0.4,\n        h: height * 0.238,\n        selected: false\n    };\n    let djBlock = {\n        x: width * 0.5,\n        y: height * 0.75,\n        w: width * 0.4,\n        h: height * 0.238,\n        selected: false\n    };\n    dcBlock.selected = collision(mouse, dcBlock);\n    djBlock.selected = collision(mouse, djBlock);\n    dcBlock.selected || djBlock.selected ? cursor(\"pointer\") : cursor(\"default\");\n    ctx.fillStyle = dcBlock.selected ? \"#58ff3e\" : \"#818084\";\n    ctx.fillRect(dcBlock.x - dcBlock.w / 2, dcBlock.y - dcBlock.h / 2, dcBlock.w, dcBlock.h);\n    ctx.fillStyle = djBlock.selected ? \"#58ff3e\" : \"#818084\";\n    ctx.fillRect(djBlock.x - djBlock.w / 2, djBlock.y  - djBlock.h / 2, djBlock.w, djBlock.h);\n    ctx.fillStyle = \"#ffe827\";\n    ctx.font = font(30);\n    ctx.textAlign = \"center\";\n    ctx.fillText(\"CHOOSE YOUR DAVID\", width * 0.5, height * 0.2);\n    if (personalBest > 0) {\n        ctx.font = font(20);\n        ctx.fillText(\"Personal Best: \" + personalBest, width * 0.5, height * 0.3);\n        ctx.font = font(30);\n    }\n    ctx.fillStyle = dcBlock.selected ? \"#FFFFFF\" : \"#b29739\";\n    ctx.fillText(\"CROSS\", width * 0.5, height * 0.38);\n    ctx.fillStyle = djBlock.selected ? \"#FFFFFF\" : \"#b29739\";\n    ctx.fillText(\"JACKSON\", width * 0.5, height * 0.68);\n    ctx.drawImage(img.dc, width / 2 - p1.w, height * 0.4, p1.w * 2, p1.h * 2);\n    ctx.drawImage(img.dj, width / 2 - p1.w, height * 0.7, p1.w * 2, p1.h * 2);\n    if ((dcBlock.selected || djBlock.selected) && mouse.down) count.currentLevel = 1;\n    p1.isCross = dcBlock.selected;\n}\n\nfunction gameScript() {\n    let objects = [stars, bullets, booms, items, enemies, [shop, p1]];\n    for (let i = 0; i < objects.length; i++) {\n        for (let j = objects[i].length - 1; j >= 0; j--) {\n            objects[i][j].show();\n            objects[i][j].update();\n            if (\"expended\" in objects[i][j] && objects[i][j].expended) {\n                objects[i].splice(j, 1);\n            }\n        }\n    }\n    count.go();\n    display();\n}\n\nfunction display() {\n    ctx.globalAlpha = 0.5;\n    ctx.fillStyle = \"#FFFFFF\";\n    ctx.fillRect(0, height * 0.915, width, height * 0.085);\n    ctx.globalAlpha = 1;\n    ctx.fillStyle = \"#000000\";\n    ctx.font = font(18);\n    ctx.textAlign=\"left\";\n    ctx.fillText(\"Davcoin: \" + p1.score, 30, height * 0.95);\n    ctx.fillText(\"HP\", 30, height * 0.98);\n    ctx.fillStyle = \"#000000\";\n    let lifebarWidth = width / 3;\n    ctx.fillRect(60, height * 0.96, lifebarWidth, height * 0.02);\n    if (p1.hp > 0) {\n        ctx.fillStyle = \"#FF0000\";\n        ctx.fillRect(60, height * 0.96, (p1.hp / p1.maxHp) * lifebarWidth, height * 0.02);\n    }\n    arsenal();\n}\n\nfunction arsenal() {\n    let pistolCoords = {\n        x: width * 0.59,\n        y: height * 0.96,\n        w: width * 0.12,\n        h: height * 0.065\n    };\n    let uziCoords = {\n        x: width * 0.72,\n        y: height * 0.96,\n        w: width * 0.12,\n        h: height * 0.065\n    };\n    let rocketCoords = {\n        x: width * 0.88,\n        y: height * 0.96,\n        w: width * 0.17,\n        h: height * 0.065\n    };\n    p1.equip === 0 ? ctx.fillStyle = \"#FFFF00\" : ctx.fillStyle = \"#999999\";\n    ctx.fillRect(pistolCoords.x - pistolCoords.w / 2, pistolCoords.y - pistolCoords.h / 2, pistolCoords.w, pistolCoords.h);\n    p1.equip === 1 ? ctx.fillStyle = \"#FFFF00\" : ctx.fillStyle = \"#999999\";\n    ctx.fillRect(uziCoords.x - uziCoords.w / 2, uziCoords.y - uziCoords.h / 2, uziCoords.w, uziCoords.h);\n    p1.equip === 2 ? ctx.fillStyle = \"#FFFF00\" : ctx.fillStyle = \"#999999\";\n    ctx.fillRect(rocketCoords.x - rocketCoords.w / 2, rocketCoords.y - rocketCoords.h / 2, rocketCoords.w, rocketCoords.h);\n    ctx.drawImage(img.pistol, pistolCoords.x - pistolCoords.w / 2, pistolCoords.y - pistolCoords.h / 2, pistolCoords.w * 0.9, pistolCoords.h * 0.9);\n    ctx.drawImage(img.uzi, uziCoords.x - uziCoords.w / 2, uziCoords.y - uziCoords.h / 2, uziCoords.w * 0.9, uziCoords.h * 0.9);\n    ctx.drawImage(img.rocketLauncher, rocketCoords.x - rocketCoords.w / 2, rocketCoords.y - rocketCoords.h / 2, rocketCoords.w * 0.9, rocketCoords.h * 0.9);\n    if (collision(pistolCoords, mouse) && mouse.down) {\n        p1.equip = 0;\n    }\n    if (collision(uziCoords, mouse) && mouse.down) {\n        p1.equip = 1;\n    }\n    if (collision(rocketCoords, mouse) && mouse.down) {\n        p1.equip = 2;\n    }\n    ctx.fillStyle = \"#4444FF\";\n    ctx.fillText(p1.uziAmmo.toString(), uziCoords.x - uziCoords.w / 2, uziCoords.y - uziCoords.h / 3);\n    ctx.fillText(p1.rocketAmmo.toString(), rocketCoords.x, rocketCoords.y - rocketCoords.h / 3);\n}\n\nfunction bulletHit(bullet) {\n    if (bullet.isRocket) {\n        bigBoom(bullet.x, bullet.y, 7, 500);\n        shrapnel(bullet.x, bullet.y);\n        return p1.rocketDamage;\n    } else if (\"isShrapnel\" in bullet) {\n        return 5;\n    } else {\n        return 1;\n    }\n}\n\nfunction bigBoom(x, y, magnitude, time) {\n    for (let j = 0; j < magnitude; j++) {\n        let rndX = Math.floor(Math.random() * (width * 0.5)) - width * 0.25;\n        let rndY = Math.floor(Math.random() * (width * 0.5)) - width * 0.25;\n        setTimeout(() => {\n            booms.push(new Boom(x + rndX, y + rndY));\n        }, Math.floor(Math.random() * time));\n    }\n}\n\nfunction drop(x, y, nothing, bowler, sax, violin, firstAid, beer, uziAmmo, rocket, barrier) {\n    let rollDice = enemyDrop(nothing, bowler, sax, violin, firstAid, beer, uziAmmo, rocket, barrier);\n    if (rollDice !== \"nothing\") items.push(new Item(rollDice, x, y));\n}\n\nfunction enemyDrop(nothing, bowler, sax, violin, firstAid, beer, uziAmmo, rocket, barrier) {\n    let choices = [\"nothing\", \"bowler\", \"sax\", \"violin\", \"firstAid\", \"beer\", \"uziAmmo\", \"rocketAmmo\", \"barrier\"];\n    let args = Array.prototype.slice.call(arguments);\n    let totalProportions = args.reduce((a, b) => a + b);\n    let rnd = Math.floor(Math.random() * totalProportions);\n    let totalNumber = 0;\n    for (let i = 0; i < args.length; i++) {\n        if (rnd < args[i] + totalNumber) {\n            return choices[i];\n        } else {\n            totalNumber += args[i];\n        }\n    }\n}\n\nlet pressOptions = {\n    event: 'press',\n    // pointer: 1,\n    threshold: 1,\n    time: 1\n};\n\nhammertime.get('press').set(pressOptions);\n\nhammertime.on('pan', function(ev) {\n    mouse.x = ev.srcEvent.pageX - gc.offset().left;\n    mouse.y = ev.srcEvent.pageY - gc.offset().top;\n    if (p1.x < 0) p1.x = 0;\n    if (p1.x > width) p1.x = width;\n});\n\ndocument.body.addEventListener(\"click\", () => {\n    p1.shoot();\n}, false);\n\ndocument.body.addEventListener(\"mousemove\", (e) => {\n    handleMouse(e);\n}, false);\n\ndocument.body.addEventListener(\"mousedown\", () => {\n    mouse.down = true;\n}, false);\n\ndocument.body.addEventListener(\"mouseup\", () => {\n    mouse.down = false;\n}, false);\n\ndocument.body.addEventListener(\"touchstart\", (e) => {\n    mouse.x = e.touches[0].pageX;\n    mouse.y = e.touches[0].pageY;\n    mouse.down = true;\n}, false);\n\ndocument.body.addEventListener(\"touchend\", () => {\n    mouse.down = false;\n}, false);\n\nif (!isMobile) {\n    document.addEventListener('keypress', (event) => {\n        if (event.keyCode === 112) {\n            paused = !paused;\n        }\n    });\n}\n\ninit();\nrender();\n"]}