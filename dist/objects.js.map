{"version":3,"sources":["../objects.js"],"names":["Player","x","y","w","width","h","height","hp","barrier","maxHp","equip","canShoot","speed","xTarget","yTarget","score","totalSpent","dead","isCross","uziAmmo","rocketAmmo","rocketDamage","show","sprite","img","dc","dj","ctx","drawImage","death","update","mouse","down","shoot","setTimeout","strokeStyle","lineWidth","Math","sin","count","levelFrame","i","beginPath","arc","PI","stroke","contain","shop","stage","paused","currentLevel","p1","aud","clone","bullets","push","Rocket","Bullet","damage","amount","booms","Boom","isRocket","expended","fillStyle","fillRect","shrapnel","destinationChoices","ShrapnelPiece","xVel","yVel","isShrapnel","destination","fill","collision","r","alpha","globalAlpha","Star","d","random","Item","name","dimensions","rot","translate","rotate","Shop","stock","stockPage","timeoutSet","insufficientFunds","purchaseSpamTimeOutSet","leftButtonCoords","rightButtonCoords","leaveButtonCoords","leftButton","lbc","cursor","moveTo","lineTo","rightButton","floor","length","rbc","leaveButton","leaveWordHeight","stars","font","fillText","restock","choices","rnd","ceil","ShopItem","shopStock","cell","currentItem","display","splice","textAlign","isMobile"],"mappings":"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","file":"objects.js","sourcesContent":["function Player() {\n    this.x = 300;\n    this.y = 800;\n    this.w = width * 0.12;\n    this.h = height * 0.065;\n    this.hp = 100;\n    this.barrier = 1;\n    this.maxHp = 100;\n    this.equip = 0;\n    this.canShoot = true;\n    this.speed = width * 0.0486;\n    this.xTarget = 300;\n    this.yTarget = 300;\n    this.score = 0;\n    this.totalSpent = 0; // used to calculate total score\n    this.dead = false;\n    this.isCross = false;\n    this.uziAmmo = 200;\n    this.rocketAmmo = 5;\n    this.rocketDamage = 30;\n    this.show = () => {\n        if (this.hp > 0) {\n            let sprite = this.isCross ? img.dc : img.dj;\n            ctx.drawImage(sprite, this.x - this.w / 2, this.y - this.h / 2, this.w, this.h);\n        } else {\n            this.death();\n        }\n    };\n    this.update = () => {\n        if (mouse.x > this.w / 2 && mouse.x < width - this.w / 2) {\n            this.xTarget = mouse.x;\n        }\n        if (this.x > this.xTarget) {\n            if (this.x - this.xTarget < this.speed) {\n                this.x -= this.x - this.xTarget;\n            } else {\n                this.x -= this.speed;\n            }\n        } else if (this.x < this.xTarget) {\n            if (this.xTarget - this.x < this.speed) {\n                this.x += this.xTarget - this.x;\n            } else {\n                this.x += this.speed;\n            }\n        }\n        if (mouse.y > this.h / 2 && mouse.y < height - this.h / 2) {\n            this.yTarget = mouse.y;\n        }\n        if (this.y > this.yTarget) {\n            if (this.y - this.yTarget < this.speed) {\n                this.y -= this.y - this.yTarget;\n            } else {\n                this.y -= this.speed;\n            }\n        } else if (this.y < this.yTarget) {\n            if (this.yTarget - this.y < this.speed) {\n                this.y += this.yTarget - this.y;\n            } else {\n                this.y += this.speed;\n            }\n        }\n        if (mouse.down && this.equip === 1 && this.canShoot) {\n            this.shoot();\n            this.canShoot = false;\n            setTimeout(() => {\n                this.canShoot = true;\n            }, 60);\n        }\n        if (this.barrier > 0) {\n            ctx.strokeStyle = \"#0000FF\";\n            ctx.lineWidth = Math.sin(count.levelFrame / 10) * 3 + 4;\n            for (let i = 0; i < this.barrier; i++) {\n                ctx.beginPath();\n                ctx.arc(this.x, this.y, width * 0.07 + (i+1) * width * 0.01, 0, 2*Math.PI);\n                ctx.stroke();\n            }\n        }\n        this.contain();\n    };\n    this.shoot = () => {\n        if (\n            shop.stage !== 2\n            && !paused\n            && count.currentLevel > 0\n            && p1.hp > 0\n            && mouse.x > 0\n            && mouse.x < width && mouse.y > 0\n            && mouse.y < height * 0.9\n        ) {\n            if (this.equip === 2) {\n                if (this.rocketAmmo > 0) {\n                    aud.clone(0); // change to rocket sound\n                    bullets.push(new Rocket(this.x));\n                    this.rocketAmmo--;\n                } else {\n                    this.equip = 0;\n                }\n            } else {\n                aud.clone(0);\n                bullets.push(new Bullet(this.x));\n                if (this.equip === 1 && this.uziAmmo > 0) {\n                    this.uziAmmo--;\n                }\n                if (this.uziAmmo <= 0) {\n                    this.equip = 0;\n                }\n            }\n        }\n    };\n    this.contain = () => {\n        if (this.x < 0) this.x = 0;\n        if (this.x > width) this.x = width;\n        if (this.y < 0) this.y = 0;\n        if (this.y > height) this.y = height;\n        if (this.hp > this.maxHp) {\n            this.hp = this.maxHp;\n        }\n    };\n    this.damage = (amount) => {\n        if (this.barrier <= 0) {\n            this.hp -= amount;\n        } else {\n            this.barrier--;\n        }\n    };\n    this.death = () => {\n        if (!this.dead) {\n            count.currentLevel = 99;\n            booms.push(new Boom(this.x, this.y));\n            this.dead = true;\n        }\n    };\n}\n\nfunction Bullet(x) {\n    this.x = x;\n    this.y = p1.y;\n    this.w = width * 0.0121;\n    this.h = height * 0.0217;\n    this.isRocket = false;\n    this.speed = height * 0.0145;\n    this.expended = false;\n    this.show = () => {\n        ctx.fillStyle = \"#0000FF\";\n        ctx.fillRect(this.x - this.w / 2, this.y - this.h / 2, this.w, this.h);\n    };\n    this.update = () => {\n        this.y -= this.speed;\n        if (this.y < -this.h) {\n            this.expended = true;\n        }\n    };\n}\n\nfunction Rocket(x) {\n    this.x = x;\n    this.y = p1.y;\n    this.w = width * 0.0221;\n    this.h = height * 0.0317;\n    this.isRocket = true;\n    this.speed = height * 0.0115;\n    this.expended = false;\n    this.show = () => {\n        ctx.fillStyle = \"#AA00FF\";\n        ctx.fillRect(this.x - this.w / 2, this.y - this.h / 2, this.w, this.h);\n    };\n    this.update = () => {\n        this.y -= this.speed;\n        if (this.y < -this.h) {\n            this.expended = true;\n        }\n    };\n}\n\nfunction shrapnel(x, y) {\n    const destinationChoices = [\n        {x: 0, y: height * 0.12},\n        {x: width * 0.04, y: height * 0.08},\n        {x: width * 0.08, y: height * 0.04},\n        {x: width * 0.12, y: 0},\n        {x: width * 0.08, y: height * -0.04},\n        {x: width * 0.04, y: height * -0.08},\n        {x: 0, y: height * -0.12},\n        {x: width * -0.04, y: height * -0.08},\n        {x: width * -0.08, y: height * -0.04},\n        {x: width * -0.12, y: 0},\n        {x: width * -0.08, y: height * 0.04},\n        {x: width * -0.04, y: height * 0.08}\n    ];\n    setTimeout(() => {\n        for (let i = 0; i < 12; i++) {\n            bullets.push(new ShrapnelPiece(x, y, destinationChoices[i].x, destinationChoices[i].y));\n        }\n    }, 10);\n}\n\nfunction ShrapnelPiece(x, y, xVel, yVel) {\n    this.x = x;\n    this.y = y;\n    this.w = width * 0.012;\n    this.h = width * 0.012;\n    this.expended = false;\n    this.isRocket = false;\n    this.isShrapnel = true;\n    this.destination = {x: xVel, y: yVel};\n    this.show = () => {\n        ctx.beginPath();\n        ctx.arc(this.x, this.y, this.w, 2 * Math.PI, false);\n        ctx.fillStyle = \"#AA00FF\";\n        ctx.fill();\n    };\n    this.update = () => {\n        this.x += this.destination.x / 10;\n        this.y += this.destination.y / 10;\n        if (!collision(this, {x: width * 0.4, y: height * 0.4, w: width * 1.2, h: height * 1.2})) {\n            this.expended = true;\n        }\n    }\n}\n\nfunction Boom(x, y) {\n    this.x = x;\n    this.y = y;\n    this.r = 5;\n    this.alpha = 1;\n    this.expended = false;\n    this.show = () => {\n        ctx.globalAlpha = this.alpha;\n        ctx.beginPath();\n        ctx.arc(this.x, this.y, this.r, 2 * Math.PI, false);\n        ctx.fillStyle = \"#FF5500\";\n        ctx.fill();\n        ctx.globalAlpha = 1;\n    };\n    this.update = () => {\n        this.r += 5;\n        this.alpha -= 0.1;\n        if (this.alpha <= 0) {\n            this.expended = true;\n        }\n    };\n}\n\nfunction Star(x, y, d) {\n    this.x = x;\n    this.y = y;\n    this.w = d;\n    this.h = d;\n    this.speed = height * 0.015;\n    this.show = () => {\n        ctx.fillStyle = \"#FFFFFF\";\n        ctx.fillRect(this.x, this.y, this.w, this.h);\n    };\n    this.update = () => {\n        this.y += this.speed;\n        if (this.y > height + this.h) {\n            this.w = this.h = Math.random() * 5 + 1;\n            this.x = Math.random() * width;\n            this.y = -this.h;\n        }\n    };\n}\n\nfunction Item(name, x, y) {\n    this.name = name;\n    this.dimensions = {\n        \"bowler\": [50, 35, 50, 2],\n        \"violin\": [40, 70, 100, 6],\n        \"sax\": [50, 70, 100, 6],\n        \"firstAid\": [50, 40, 120, 25],\n        \"beer\": [50, 60, 100, 10],\n        \"uziAmmo\": [50, 50, 50, 0],\n        \"rocketAmmo\": [50, 50, 50, 0],\n        \"barrier\": [50, 50, 100, 0]\n    };\n    this.x = x;\n    this.y = y;\n    this.w = this.dimensions[this.name][0];\n    this.h = this.dimensions[this.name][1];\n    this.rot = 0;\n    this.speed = 5;\n    this.expended = false;\n    this.show = () => {\n        ctx.translate(this.x, this.y);\n        ctx.rotate(this.rot * Math.PI / 180);\n        ctx.drawImage(img[this.name], -this.w / 2, -this.h / 2, this.w, this.h);\n        ctx.rotate(-this.rot * Math.PI / 180);\n        ctx.translate(-this.x, -this.y);\n    };\n    this.update = () => {\n        this.y += this.speed;\n        this.expended = this.y > height + this.h;\n        if (collision(this, p1)) {\n            p1.score+= this.dimensions[this.name][2];\n            p1.hp += this.dimensions[this.name][3];\n            aud.clone(6);\n            if (this.name === \"uziAmmo\") {\n                p1.uziAmmo += 200;\n            } else if (this.name === \"rocketAmmo\") {\n                p1.rocketAmmo += 3;\n            } else if (this.name === \"barrier\") {\n                p1.barrier++;\n            }\n            this.expended = true;\n        }\n        this.rot++;\n    };\n}\n\nfunction Shop() {\n    this.x = 0;\n    this.y = 0;\n    this.w = 120;\n    this.h = 100;\n    this.xVel = 5;\n    this.yVel = 7;\n    this.rot = 360 * 2;\n    this.stage = 0;\n    this.stock = [];\n    this.stockPage = 0;\n    this.timeoutSet = false;\n    this.insufficientFunds = false;\n    this.purchaseSpamTimeOutSet = false;\n    this.leftButtonCoords = {\n        x: width * 0.25,\n        y: height * 0.7,\n        w: width * 0.2,\n        h: height * 0.15\n    };\n    this.rightButtonCoords = {\n        x: width * 0.75,\n        y: height * 0.7,\n        w: width * 0.2,\n        h: height * 0.15\n    };\n    this.leaveButtonCoords = {\n        x: width * 0.5,\n        y: height * 0.85,\n        w: width * 0.6,\n        h: height * 0.1\n    };\n    this.leftButton = () => {\n        if (this.stockPage > 0) {\n            let lbc = this.leftButtonCoords;\n            ctx.fillStyle = \"#444444\";\n            ctx.fillRect(lbc.x - lbc.w / 2, lbc.y - lbc.h / 2, lbc.w, lbc.h);\n            ctx.fillStyle = \"#FFFFAA\";\n            if (collision(mouse, lbc)) {\n                cursor(\"pointer\");\n                ctx.fillStyle = \"#FFFFFF\";\n                if (mouse.down && !this.purchaseSpamTimeOutSet) {\n                    this.stockPage--;\n                    setTimeout(() => { this.purchaseSpamTimeOutSet = false }, 500);\n                    this.purchaseSpamTimeOutSet = true;\n                }\n            }\n            ctx.beginPath();\n            ctx.moveTo(width * 0.3, height * 0.65);\n            ctx.lineTo(width * 0.2, height * 0.7);\n            ctx.lineTo(width * 0.3, height * 0.75);\n            ctx.fill();\n        }\n    };\n    this.rightButton = () => {\n        if (this.stockPage < Math.floor((this.stock.length - 1) / 9)) {\n            let rbc = this.rightButtonCoords;\n            ctx.fillStyle = \"#444444\";\n            ctx.fillRect(rbc.x - rbc.w / 2, rbc.y - rbc.h / 2, rbc.w, rbc.h);\n            ctx.fillStyle = \"#FFFFAA\";\n            if (collision(mouse, rbc)) {\n                cursor(\"pointer\");\n                ctx.fillStyle = \"#FFFFFF\";\n                if (mouse.down && !this.purchaseSpamTimeOutSet) {\n                    this.stockPage++;\n                    setTimeout(() => { this.purchaseSpamTimeOutSet = false }, 500);\n                    this.purchaseSpamTimeOutSet = true;\n                }\n            }\n            ctx.beginPath();\n            ctx.moveTo(width * 0.7, height * 0.65);\n            ctx.lineTo(width * 0.8, height * 0.7);\n            ctx.lineTo(width * 0.7, height * 0.75);\n            ctx.fill();\n        }\n    };\n    this.leaveButton = () => {\n        let lbc = this.leaveButtonCoords;\n        let leaveWordHeight = height * 0.875;\n        ctx.fillStyle = \"#772F1A\";\n        ctx.fillRect(lbc.x - lbc.w / 2, lbc.y - lbc.h / 2, lbc.w, lbc.h);\n        if (collision(mouse, lbc)) {\n            ctx.fillStyle = \"#FFFF00\";\n            cursor(\"pointer\");\n            if (mouse.down) {\n                leaveWordHeight = height * 0.88;\n                if (count.currentLevel === 20) {\n                    for (let i = 0; i < stars.length; i++) {\n                        stars[i].speed = height * 0.015;\n                    }\n                }\n                if (!this.timeoutSet) {\n                    setTimeout(() => {\n                        this.stage = 3;\n                        this.timeoutSet = false;\n                        cursor(\"default\");\n                    }, 200);\n                    this.timeoutSet = true;\n                }\n            }\n        } else {\n            ctx.fillStyle = \"#FFFFFF\";\n        }\n        ctx.font = font(50);\n        ctx.fillText(\"Leave\", width / 2, leaveWordHeight);\n\n    };\n    this.restock = () => {\n        let choices = [\"beer\", \"firstAid\", \"barrier\", \"uziAmmo\", \"rocket\"];\n        let rnd = Math.ceil(Math.random() * 6);\n        for (let i = 0; i < rnd; i++) {\n            this.stock.push(new ShopItem(choices[Math.floor(Math.random() * choices.length)]));\n        }\n    };\n    this.shopStock = () => {\n        if (shop.stock.length === 0) {\n            ctx.font = font(20);\n            ctx.fillText(\"There is nothing left in stock\", width / 2, height * 0.5);\n        } else {\n            let cell = width * 0.2;\n            for (let i = 0; i < this.stock.length - (this.stockPage * 9) && i < 9; i++) {\n                let currentItem = this.stock[this.stockPage * 9 + i];\n                currentItem.display(i % 3 * cell + cell, Math.floor(i / 3) * cell + cell * 2);\n                if (currentItem.expended) {\n                    this.stock.splice(i + (this.stockPage * 9), 1);\n                }\n            }\n        }\n    };\n    this.show = () => {\n        if (this.stage > 0) {\n            ctx.translate(this.x, this.y);\n            ctx.rotate(this.rot * Math.PI / 180);\n            ctx.drawImage(img.shop, -this.w / 2, -this.h / 2, this.w, this.h);\n            ctx.rotate(-this.rot * Math.PI / 180);\n            ctx.translate(-this.x, -this.y);\n        }\n        if (this.stage === 2) {\n            ctx.fillStyle = \"#2b333f\";\n            ctx.fillRect(0, 0, width, height);\n            ctx.textAlign = \"center\";\n            ctx.fillStyle = \"#FFFFFF\";\n            ctx.font = font(50);\n            ctx.fillText(\"SHOP\", width / 2, height * 0.2);\n            this.shopStock();\n            this.leaveButton();\n            this.rightButton();\n            this.leftButton();\n            if (this.insufficientFunds && mouse.down) {\n                ctx.fillStyle = \"#000\";\n                ctx.fillRect(width * 0.05, height * 0.45, width * 0.9, height * 0.1);\n                ctx.fillStyle = \"#FFF\";\n                ctx.font = font(30);\n                ctx.fillText(\"Insufficient Funds\", width / 2, height / 2);\n                ctx.fillStyle = \"#FFFF00\";\n                ctx.font = font(15);\n            }\n        }\n    };\n    this.update = () => {\n        switch (this.stage) {\n            case 1:\n                if (this.x > p1.x + this.xVel) {\n                    this.x -= this.xVel;\n                } else if (this.x < p1.x - this.xVel) {\n                    this.x += this.xVel;\n                }\n                this.rot *= 0.93;\n                if (this.yVel > 1) {\n                    this.yVel *= 0.99;\n                }\n                if (this.y < p1.y - height * 0.1) {\n                    this.y += this.yVel;\n                } else {\n                    this.stage = 2;\n                    if (isMobile) {\n                        mouse.x = mouse.y = 0;\n                    }\n                }\n                break;\n            case 3:\n                this.yVel++;\n                this.y += this.yVel;\n                if (this.y > height) {\n                    this.yVel = 7;\n                    this.rot = 360 * 2;\n                    this.y = this.stage = 0;\n                    count.currentLevel++;\n                }\n                break;\n        }\n    };\n}"]}